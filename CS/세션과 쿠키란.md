# 세션과 쿠키란?

> 접속이 가능한 아무 웹사이트에 접속 해보자. 그럼 웹 사이트는 웹 페이지를 보내주고 더 이상 요청사항이 없으면 서버에서 연결을 끊을 것이다.   
> 만약 네X버에 로그인을 해보자. 그러면 네X버는 로그인을 성공했다고 로그인이 된 페이지를 보여줄 것 이다. 그리고 연결을 끊을 것 이다.   
> 네X버에서 검색도 좀 해보고 뉴스도 보자 그리고 다시 네X버 홈페이지로 들어가보자. 그러면 로그인이 안되어 있을 것이다.   
> 왜냐하면 서버는 웹페이지를 보내주고 더 이상 요청이 없으면 연결을 끊어버리니 처음 로그인 했을 때 이외에는 로그인을 확인 할 수 없기 때문이다.   
> 그렇기 때문에 쿠키라는 것이 탄생하게 되었다.


## 쿠키
> 쿠키란 작은 데이터 파일이다.   
> 이 데이터는 대부분 서버에서 삭제 갱신 추가 한다. 하지만 `사용자도 쿠키를 삭제 갱신 추가`가 가능하다.   
> 이 쿠키 데이터는 서버에서도 읽을 수 있다.   
> 쿠키의 데이터는 크게 Key와 value로 이루어저 있으며 쿠키의 유효시간 도메인(도착지) 경로(도착지점)등의 정보를 가지고 있다.   
> 예시로 서버에서 로그인을 하고 로그인 된 유저에게는 쿠키(토큰)를 발급해준다. 그 쿠키의 값으로 로그인 인증을 할 수 있다.   
> 로그인 이외에도 서버가 모든 걸 처리하기 부담스럽거나 데이터를 사용은 해야하나 유저가 가지고 있어도 문제가 없는 데이터 들은 쿠키를 이용한다.   
> `하지만` 쿠키는 사용자도 볼 수 있으며 추가 삭제 갱신도 가능하다. 만약에 쿠키가 탈취 당한다면 개개인의 중요한 정보들이 유출이 된다.   
> 이를 막기위한 방법은 여러가지가 있지만 다음에 추가적으로 이야기 하겠다.   

## 세션
> 세션은 쿠키를 기반으로 만들어 졌다. 그러니 쿠키와 거의 비슷하다.   
> 세션은 `쿠키에 특징 + 휘발성`이다.   
> 즉 브라우저를 닫으면 세션은 삭제된다.   
> 1회성 로그인 등에 많이 사용된다. 세션은 한 브라우저에 하나만 생성 가능하다.   


## 쿠키로 로그인 인증방식
> 로그인을 요청을 하게 되면 그에 맞는 유저를 찾고 그 유저의 정보를 담은 쿠키를 클라이언트에 보낸다.   
> 다음에 로그인이 필요한 작업이 있을때 로그인이 인증된 쿠키를 확인한다.    
> 로그인 처리 끝   

## 세션방식으로 로그인 인증방식
> 로그인을 요청을 받으면 그에 맞는 유저를 찾고 `유저 정보를 로그인 관리 DB서버에 저장한다`   
> 그리고 유저에게 그에 알맞은 `session_id`를 반환해준다.   
> session_id를 가지고 있으면 로그인 작업이 필요한 작업이 있을때 서버에서 session_id를 읽고 로그인 처리가 되어있음을 확인한다.
> 세션방식은 session_id란 키만 클라이언트가 가지고 있기 때문에 데이터 유출에 안전하다.    
> 하지만 몇번의 검색을 거치기 때문에 많은 사용자가 있을때에는 메모리를 많이 차지하게 됨으로 서버 과부화가 걸릴 수도 있고 쿠키 방식에 비해 확인해야 할 상황이 많아 시간이 걸리는 편이다.   